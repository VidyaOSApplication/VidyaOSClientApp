import{a as q}from"./chunk-HGUJNCJE.js";import{A as p,Ab as U,Bb as Y,C as d,Cb as A,D as n,E as t,Eb as D,F as f,Fb as G,J as M,K as g,Lb as V,Ra as w,S as r,Sa as F,T as _,U as b,Ua as k,W as h,X as u,Y as x,_ as v,cb as N,ea as P,fa as T,gb as W,ha as S,ka as O,na as E,pb as $,sb as j,tb as B,u as o,vb as z,w as I,wb as L,y,zb as H}from"./chunk-A35WYOVZ.js";import"./chunk-MYMNFIR5.js";import"./chunk-QUJFQN2Y.js";import"./chunk-SQ2FC6MI.js";import"./chunk-MXQU5NIL.js";import"./chunk-RE5BQNDC.js";import"./chunk-WMOWL56E.js";import"./chunk-DE3NY5IG.js";import"./chunk-GVUKRWTT.js";import"./chunk-7FY2OE2O.js";import"./chunk-V5RQBZ6Q.js";import"./chunk-TOLZJHI4.js";import"./chunk-3IV7M6SB.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-O6KNH33T.js";import"./chunk-CKP3SGE2.js";import"./chunk-IMAI2IPK.js";import"./chunk-IGVXFY24.js";import"./chunk-5TIAO6TV.js";import"./chunk-BANGDX2W.js";import"./chunk-FZQDFHAZ.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var J=()=>[1,2,3,4,5,6,7,8,9,10,11,12];function K(i,a){if(i&1&&(n(0,"ion-select-option",8),r(1),t()),i&2){let s=a.$implicit;d("value",s),o(),b(" Class ",s," ")}}function Q(i,a){if(i&1&&(n(0,"ion-text",13)(1,"p",14),r(2),t()()),i&2){let s=g();o(2),_(s.errorMessage)}}function R(i,a){i&1&&(n(0,"div",15),f(1,"ion-spinner"),t())}function X(i,a){if(i&1&&(n(0,"th"),r(1),t()),i&2){let s=a.$implicit;o(),_(s)}}function Z(i,a){if(i&1&&(n(0,"td")(1,"div",21),r(2),t(),n(3,"div",22),r(4),t()()),i&2){let s=a.$implicit,e=g().$implicit,l=g(2);o(2),b(" ",(l.table[e]==null||l.table[e][s]==null?null:l.table[e][s].subject)||"-"," "),o(2),b(" ",(l.table[e]==null||l.table[e][s]==null?null:l.table[e][s].time)||""," ")}}function ee(i,a){if(i&1&&(n(0,"tr")(1,"td",20),r(2),t(),p(3,Z,5,2,"td",19),t()),i&2){let s=a.$implicit,e=g(2);o(2),b("P",s),o(),d("ngForOf",e.days)}}function te(i,a){if(i&1&&(n(0,"div",2)(1,"h3",3),f(2,"ion-icon",16),r(3," Weekly Timetable "),t(),n(4,"div",17)(5,"table",18)(6,"thead")(7,"tr")(8,"th"),r(9,"Period"),t(),p(10,X,2,1,"th",19),t()(),n(11,"tbody"),p(12,ee,4,2,"tr",19),t()()()()),i&2){let s=g();o(10),d("ngForOf",s.days),o(2),d("ngForOf",s.periods)}}var pe=(()=>{let a=class a{constructor(e){this.http=e,this.apiUrl=`${q.apiBaseUrl}/School/GetClassTimetable`,this.schoolId=17,this.academicYear="2025-26",this.timetable=[],this.days=["Monday","Tuesday","Wednesday","Thursday","Friday"],this.periods=[],this.table={},this.loading=!1,this.errorMessage=""}loadTimetable(){if(!this.classId||!this.sectionId){this.errorMessage="Please select class and section";return}this.errorMessage="",this.loading=!0,this.timetable=[],this.periods=[],this.table={};let e=`${this.apiUrl}?schoolId=${this.schoolId}&classId=${this.classId}&sectionId=${this.sectionId}&academicYear=${this.academicYear}`;this.http.get(e).subscribe({next:l=>{this.timetable=l?.data??[],this.buildTable(),this.loading=!1},error:()=>{this.errorMessage="Failed to load timetable",this.loading=!1}})}buildTable(){for(let e of this.timetable){this.periods.includes(e.periodNo)||this.periods.push(e.periodNo);let l=this.days[e.dayOfWeek-1];this.table[e.periodNo]||(this.table[e.periodNo]={}),this.table[e.periodNo][l]={subject:e.subjectName,time:`${e.startTime} - ${e.endTime}`}}this.periods.sort((e,l)=>e-l)}};a.\u0275fac=function(l){return new(l||a)(I(O))},a.\u0275cmp=y({type:a,selectors:[["app-class-timetable"]],decls:29,vars:10,consts:[[1,"timetable-header"],[1,"timetable-page"],[1,"section-card"],[1,"section-title"],["name","options-outline"],["position","stacked"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["expand","block",1,"primary-btn",3,"click"],["color","danger",4,"ngIf"],["class","loader",4,"ngIf"],["class","section-card",4,"ngIf"],["color","danger"],[1,"msg","error"],[1,"loader"],["name","calendar-outline"],[1,"table-wrapper"],[1,"timetable-table"],[4,"ngFor","ngForOf"],[1,"period-cell"],[1,"subject"],[1,"time"]],template:function(l,c){l&1&&(n(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),r(3,"Class Timetable"),t()()(),n(4,"ion-content",1)(5,"div",2)(6,"h3",3),f(7,"ion-icon",4),r(8," Select Class & Section "),t(),n(9,"ion-item")(10,"ion-label",5),r(11,"Class *"),t(),n(12,"ion-select",6),x("ngModelChange",function(m){return u(c.classId,m)||(c.classId=m),m}),p(13,K,2,2,"ion-select-option",7),t()(),n(14,"ion-item")(15,"ion-label",5),r(16,"Section *"),t(),n(17,"ion-select",6),x("ngModelChange",function(m){return u(c.sectionId,m)||(c.sectionId=m),m}),n(18,"ion-select-option",8),r(19,"A"),t(),n(20,"ion-select-option",8),r(21,"B"),t(),n(22,"ion-select-option",8),r(23,"C"),t()()(),n(24,"ion-button",9),M("click",function(){return c.loadTimetable()}),r(25," Load Timetable "),t(),p(26,Q,3,1,"ion-text",10)(27,R,2,0,"div",11),t(),p(28,te,13,2,"div",12),t()),l&2&&(o(12),h("ngModel",c.classId),o(),d("ngForOf",v(9,J)),o(4),h("ngModel",c.sectionId),o(),d("value",1),o(2),d("value",2),o(2),d("value",3),o(4),d("ngIf",c.errorMessage),o(),d("ngIf",c.loading),o(),d("ngIf",c.periods.length>0))},dependencies:[S,P,T,k,w,F,V,W,$,j,B,z,L,H,U,Y,A,D,G,N,E],styles:[".timetable-page[_ngcontent-%COMP%]{--background: #f4f6fb;padding:16px}.timetable-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #0ea5a4, #2563eb);--color: #ffffff}.section-card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;padding:16px;margin-bottom:18px;box-shadow:0 10px 25px #0000000f}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:15px;font-weight:600;margin-bottom:14px;color:#1f2937}.section-title[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#0ea5a4}ion-item[_ngcontent-%COMP%]{--background: transparent;border:1px solid #e5e7eb;border-radius:12px;margin-bottom:12px}.primary-btn[_ngcontent-%COMP%]{height:48px;font-weight:600;margin-top:8px}.loader[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10px}.msg[_ngcontent-%COMP%]{text-align:center;font-size:14px;margin-top:8px}.msg.error[_ngcontent-%COMP%]{color:#991b1b}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}.timetable-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:13px}.timetable-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#e0f2fe;color:#075985;padding:10px;text-align:center;font-weight:600;border:1px solid #e5e7eb}.timetable-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #e5e7eb;padding:10px;text-align:center;vertical-align:middle}.period-cell[_ngcontent-%COMP%]{font-weight:700;background:#f0f9ff;color:#075985}.subject[_ngcontent-%COMP%]{font-weight:600;color:#111827}.time[_ngcontent-%COMP%]{font-size:11px;color:#6b7280;margin-top:2px}"]});let i=a;return i})();export{pe as ClassTimetablePage};
