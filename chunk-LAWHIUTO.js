import{a as M}from"./chunk-HGUJNCJE.js";import{a as R}from"./chunk-FNKDIBDA.js";import{A as f,Ab as G,C as m,D as i,E as o,Eb as J,F as u,Fb as q,I as b,J as _,K as d,Kb as K,Lb as Q,Ra as L,S as c,Sa as N,T as w,U as h,Ua as D,W as y,X as O,Y as k,cb as $,ea as E,fa as S,fb as j,gb as B,ha as T,ka as V,m as p,n as g,pb as z,qa as F,sb as A,tb as W,u as l,vb as H,w as x,wb as U,y as P,zb as Y}from"./chunk-A35WYOVZ.js";import"./chunk-MYMNFIR5.js";import"./chunk-QUJFQN2Y.js";import"./chunk-SQ2FC6MI.js";import"./chunk-MXQU5NIL.js";import"./chunk-RE5BQNDC.js";import"./chunk-WMOWL56E.js";import"./chunk-VZPOKD32.js";import"./chunk-DE3NY5IG.js";import"./chunk-GVUKRWTT.js";import"./chunk-7FY2OE2O.js";import"./chunk-V5RQBZ6Q.js";import"./chunk-TOLZJHI4.js";import"./chunk-3IV7M6SB.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-O6KNH33T.js";import"./chunk-CKP3SGE2.js";import"./chunk-IMAI2IPK.js";import"./chunk-IGVXFY24.js";import"./chunk-5TIAO6TV.js";import"./chunk-BANGDX2W.js";import"./chunk-FZQDFHAZ.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as v,b as I,e as C}from"./chunk-JHI3MBHO.js";function X(r,s){r&1&&(i(0,"div",4),u(1,"ion-icon",5),i(2,"h3"),c(3,"No Exams Found"),o(),i(4,"p"),c(5,"Create exams to manage schedules and marks"),o()())}function Z(r,s){if(r&1&&(i(0,"ion-select-option",20),c(1),o()),r&2){let n=s.$implicit;m("value",n.classId),l(),h(" Class ",n.classId," ")}}function ee(r,s){if(r&1){let n=b();i(0,"ion-button",21),_("click",function(){p(n);let t=d().$implicit,a=d();return g(a.declareResult(t))}),u(1,"ion-icon",22),c(2," Declare "),o()}}function te(r,s){if(r&1){let n=b();i(0,"div",6)(1,"div",7)(2,"div",8)(3,"h2"),c(4),o(),i(5,"p"),c(6),o()(),i(7,"ion-badge",9),c(8),o()(),i(9,"div",10)(10,"ion-item")(11,"ion-label",11),c(12,"Select Class"),o(),i(13,"ion-select",12),k("ngModelChange",function(t){let a=p(n).$implicit;return O(a.selectedClass,t)||(a.selectedClass=t),g(t)}),f(14,Z,2,2,"ion-select-option",13),o()(),i(15,"div",14)(16,"ion-button",15),_("click",function(){let t=p(n).$implicit,a=d();return g(a.openSchedule(t))}),u(17,"ion-icon",16),c(18," Schedule "),o(),i(19,"ion-button",17),_("click",function(){let t=p(n).$implicit,a=d();return g(a.openMarks(t))}),u(20,"ion-icon",18),c(21," Marks "),o(),f(22,ee,3,0,"ion-button",19),o()()()}if(r&2){let n=s.$implicit,e=d();l(4),w(n.examName),l(2),h("Academic Year ",n.academicYear),l(),m("color",e.getStatusColor(n.status)),l(),h(" ",n.status," "),l(5),y("ngModel",n.selectedClass),l(),m("ngForOf",n.classes),l(8),m("ngIf",n.status==="Marks Entered")}}var ge=(()=>{let s=class s{constructor(e,t,a){this.http=e,this.router=t,this.toast=a,this.exams=[]}ngOnInit(){return C(this,null,function*(){let e=JSON.parse((yield R.get({key:"user_profile"})).value);this.schoolId=e.schoolId,this.load()})}load(){this.http.get(`${M.apiBaseUrl}/Exam/GetExams`,{params:{schoolId:this.schoolId}}).subscribe(e=>{this.exams=e.data.map(t=>I(v({},t),{selectedClass:null}))})}openSchedule(e){if(!e.selectedClass){this.showToast("Please select class first","danger");return}this.router.navigate(["/admin/schedule-exam",e.examId,e.selectedClass])}openMarks(e){if(!e.selectedClass){this.showToast("Please select class first","danger");return}this.router.navigate(["/admin/enter-marks",e.examId,e.selectedClass])}declareResult(e){this.http.post(`${M.apiBaseUrl}/Exam/DeclareResult`,{examId:e.examId}).subscribe(()=>{this.showToast("Result declared","success"),this.load()})}showToast(e,t){return C(this,null,function*(){yield(yield this.toast.create({message:e,duration:2e3,color:t,position:"top"})).present()})}getStatusColor(e){switch(e){case"Draft":return"medium";case"Subjects Assigned":return"warning";case"Marks Entered":return"primary";case"Result Declared":return"success";default:return"medium"}}};s.\u0275fac=function(t){return new(t||s)(x(V),x(F),x(K))},s.\u0275cmp=P({type:s,selectors:[["app-exam-list"]],decls:7,vars:2,consts:[[1,"exams-header"],[1,"exams-page"],["class","empty-state",4,"ngIf"],["class","exam-card",4,"ngFor","ngForOf"],[1,"empty-state"],["name","document-text-outline"],[1,"exam-card"],[1,"exam-header"],[1,"left"],[3,"color"],[1,"exam-body"],["position","stacked"],["placeholder","Choose class",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"actions"],["fill","outline","color","warning",3,"click"],["name","calendar-outline","slot","start"],["fill","outline","color","primary",3,"click"],["name","clipboard-outline","slot","start"],["fill","outline","color","success",3,"click",4,"ngIf"],[3,"value"],["fill","outline","color","success",3,"click"],["name","checkmark-done-outline","slot","start"]],template:function(t,a){t&1&&(i(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),c(3,"Exams"),o()()(),i(4,"ion-content",1),f(5,X,6,0,"div",2)(6,te,23,7,"div",3),o()),t&2&&(l(5),m("ngIf",a.exams.length===0),l(),m("ngForOf",a.exams))},dependencies:[T,E,S,Q,j,B,z,A,W,H,U,Y,G,J,q,$,D,L,N],styles:[".exams-page[_ngcontent-%COMP%]{--background: #f4f6fb;padding:16px}.exams-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #0ea5a4, #0284c7);--color: #ffffff;font-weight:700}.empty-state[_ngcontent-%COMP%]{margin-top:60px;text-align:center;color:#6b7280}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:56px;opacity:.6}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:12px;font-weight:600;color:#111827}.exam-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:16px;margin-bottom:18px;box-shadow:0 12px 30px #00000014}.exam-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px}.exam-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px;font-weight:700;margin:0;color:#111827}.exam-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;margin:4px 0 0;color:#6b7280}.exam-body[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;border:1px solid #e5e7eb;border-radius:12px;margin-bottom:14px}.actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(110px,1fr));gap:10px}.actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:40px;font-size:13px;font-weight:600;--border-radius: 12px}ion-badge[color=success][_ngcontent-%COMP%]{--background: #22c55e;color:#fff}ion-badge[color=warning][_ngcontent-%COMP%]{--background: #f59e0b;color:#fff}ion-badge[color=primary][_ngcontent-%COMP%]{--background: #3b82f6;color:#fff}ion-badge[color=medium][_ngcontent-%COMP%]{--background: #9ca3af;color:#fff}"]});let r=s;return r})();export{ge as ExamListPage};
