import{a as V}from"./chunk-HGUJNCJE.js";import{a as T}from"./chunk-FNKDIBDA.js";import{$a as E,B as C,Ca as S,Da as F,F as i,Fa as w,H as y,J as b,K as _,L as M,Na as k,R as v,S as P,Sa as G,U as I,X as O,ab as N,cb as W,db as z,fb as A,gb as B,jb as D,kb as J,lb as j,mb as L,ob as Y,pb as H,r as s,s as f,sb as $,t as x,u as g,vb as K,w as d,wb as U,x as t,y as o,z as h}from"./chunk-JP5JOBMG.js";import"./chunk-MYMNFIR5.js";import"./chunk-QUJFQN2Y.js";import"./chunk-SQ2FC6MI.js";import"./chunk-MXQU5NIL.js";import"./chunk-RE5BQNDC.js";import"./chunk-WMOWL56E.js";import"./chunk-VZPOKD32.js";import"./chunk-DE3NY5IG.js";import"./chunk-GVUKRWTT.js";import"./chunk-7FY2OE2O.js";import"./chunk-V5RQBZ6Q.js";import"./chunk-TOLZJHI4.js";import"./chunk-3IV7M6SB.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-O6KNH33T.js";import"./chunk-CKP3SGE2.js";import"./chunk-IMAI2IPK.js";import"./chunk-PAKTAAC6.js";import"./chunk-BBW5KUYG.js";import"./chunk-677QIFDF.js";import"./chunk-G7CBOZIR.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-3IVKBF6N.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as m}from"./chunk-JHI3MBHO.js";function q(a,r){if(a&1&&(t(0,"ion-select-option",15),i(1),o()),a&2){let p=r.$implicit;d("value",p.value),s(),y(" ",p.label," ")}}function Q(a,r){if(a&1&&(t(0,"ion-select-option",15),i(1),o()),a&2){let p=r.$implicit;d("value",p),s(),y(" ",p," ")}}function R(a,r){a&1&&h(0,"ion-spinner",16)}var se=(()=>{let r=class r{constructor(l,n,e){this.http=l,this.toastCtrl=n,this.alertCtrl=e,this.loading=!1,this.months=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}],this.years=[],this.form={schoolId:0,month:null,year:null}}ngOnInit(){return m(this,null,function*(){let l=yield T.get({key:"user_profile"});l.value&&(this.form.schoolId=JSON.parse(l.value).schoolId);let n=new Date().getFullYear();this.years=[n,n+1]})}generateFee(){if(!this.form.month||!this.form.year){this.showToast("Please select month and year","danger");return}this.loading=!0;let l={schoolId:this.form.schoolId,feeMonth:this.form.year+"-"+this.form.month};this.http.post(`${V.apiBaseUrl}/School/GenerateMonthlyFee`,l).subscribe({next:n=>m(this,null,function*(){this.loading=!1;let e=n.data;yield(yield this.alertCtrl.create({header:"\u2705 Fee Generated",message:`
              Month: ${e.feeMonth}
              Fees Generated: ${e.feesGenerated}
              Already Exists: ${e.skipped}
            `,buttons:["OK"]})).present()}),error:()=>{this.loading=!1,this.showToast("Failed to generate monthly fee","danger")}})}showToast(l,n){return m(this,null,function*(){yield(yield this.toastCtrl.create({message:l,duration:2e3,position:"top",color:n})).present()})}};r.\u0275fac=function(n){return new(n||r)(f(O),f(K),f($))},r.\u0275cmp=x({type:r,selectors:[["app-generate-monthly-fee"]],decls:33,vars:6,consts:[[1,"fee-header"],[1,"fee-page"],[1,"info-card"],["name","calendar-outline"],[1,"section-card"],[1,"section-title"],["name","settings-outline"],["position","stacked"],["color","danger"],["placeholder","Select month",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Select year",3,"ngModelChange","ngModel"],[1,"fee-footer"],["expand","block","color","success",3,"click","disabled"],["slot","start",4,"ngIf"],[3,"value"],["slot","start"]],template:function(n,e){n&1&&(t(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),i(3,"Generate Monthly Fee"),o()()(),t(4,"ion-content",1)(5,"div",2),h(6,"ion-icon",3),t(7,"h2"),i(8,"Monthly Fee Generation"),o(),t(9,"p"),i(10," Select month and year to generate fees for all applicable students "),o()(),t(11,"div",4)(12,"h3",5),h(13,"ion-icon",6),i(14," Fee Period "),o(),t(15,"ion-item")(16,"ion-label",7),i(17," Month "),t(18,"ion-text",8),i(19,"*"),o()(),t(20,"ion-select",9),M("ngModelChange",function(c){return _(e.form.month,c)||(e.form.month=c),c}),g(21,q,2,2,"ion-select-option",10),o()(),t(22,"ion-item")(23,"ion-label",7),i(24," Year "),t(25,"ion-text",8),i(26,"*"),o()(),t(27,"ion-select",11),M("ngModelChange",function(c){return _(e.form.year,c)||(e.form.year=c),c}),g(28,Q,2,2,"ion-select-option",10),o()()()(),t(29,"ion-footer",12)(30,"ion-button",13),C("click",function(){return e.generateFee()}),g(31,R,1,0,"ion-spinner",14),i(32," Generate Monthly Fee "),o()()),n&2&&(s(20),b("ngModel",e.form.month),s(),d("ngForOf",e.months),s(6),b("ngModel",e.form.year),s(),d("ngForOf",e.years),s(2),d("disabled",e.loading),s(),d("ngIf",e.loading))},dependencies:[U,G,E,N,W,z,A,B,D,J,j,L,Y,H,k,I,v,P,w,S,F],styles:[".fee-page[_ngcontent-%COMP%]{--background: #f4f6fb;padding:16px}.fee-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #e0f2fe;--color: #075985;font-weight:700}.info-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e0f2fe,#f0f9ff);border-radius:20px;padding:20px;text-align:center;margin-bottom:20px;box-shadow:0 12px 28px #0000000f}.info-card[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:42px;color:var(--ion-color-primary);margin-bottom:6px}.info-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin:6px 0;color:#0f172a}.info-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#475569;margin:0}.section-card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;padding:16px;box-shadow:0 10px 25px #0000000f}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:14px;font-size:15px;font-weight:600;color:#1f2937}.section-title[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-item[_ngcontent-%COMP%]{--background: transparent;--highlight-height: 0;border:1px solid #e5e7eb;border-radius:12px;margin-bottom:14px}ion-select[_ngcontent-%COMP%]{--color: #111827;--placeholder-opacity: 1}ion-select[_ngcontent-%COMP%]::part(text){color:#111827;font-weight:500}.fee-footer[_ngcontent-%COMP%]{padding:10px 14px;background:#fff;box-shadow:0 -6px 20px #00000014}.fee-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:50px;font-size:15px;font-weight:700;border-radius:14px}"]});let a=r;return a})();export{se as GenerateMonthlyFeePage};
