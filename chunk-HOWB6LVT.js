import{a as ne}from"./chunk-HGUJNCJE.js";import{a as N}from"./chunk-FNKDIBDA.js";import{A as b,Ab as X,C as E,Cb as Z,D as e,E as i,Eb as $,F as u,Fb as ee,I as w,J as _,K as S,Kb as te,Lb as ie,Ra as k,S as n,Sa as D,U as I,Ua as F,W as p,X as g,Y as x,ab as W,cb as Y,db as B,ea as P,gb as V,ha as T,ka as O,m as C,n as y,nb as z,ob as A,pb as L,qa as v,qb as U,rb as j,sb as H,tb as R,u as c,ub as q,vb as G,w as h,wb as J,y as M,yb as K,zb as Q}from"./chunk-A35WYOVZ.js";import"./chunk-MYMNFIR5.js";import"./chunk-QUJFQN2Y.js";import"./chunk-SQ2FC6MI.js";import"./chunk-MXQU5NIL.js";import"./chunk-RE5BQNDC.js";import"./chunk-WMOWL56E.js";import"./chunk-VZPOKD32.js";import"./chunk-DE3NY5IG.js";import"./chunk-GVUKRWTT.js";import"./chunk-7FY2OE2O.js";import"./chunk-V5RQBZ6Q.js";import"./chunk-TOLZJHI4.js";import"./chunk-3IV7M6SB.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-O6KNH33T.js";import"./chunk-CKP3SGE2.js";import"./chunk-IMAI2IPK.js";import"./chunk-IGVXFY24.js";import"./chunk-5TIAO6TV.js";import"./chunk-BANGDX2W.js";import"./chunk-FZQDFHAZ.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as d}from"./chunk-JHI3MBHO.js";function oe(m,l){if(m&1){let f=w();e(0,"ion-col",17)(1,"ion-item",18)(2,"ion-checkbox",19),_("ionChange",function(o){let t=C(f).$implicit,s=S();return y(s.toggleClass(t,o.detail.checked))}),i(),e(3,"ion-label"),n(4),i()()()}if(m&2){let f=l.$implicit;c(4),I("Class ",f)}}var fe=(()=>{let l=class l{constructor(r,o,t){this.http=r,this.toast=o,this.router=t,this.classes=[],this.selectedClasses=[],this.examName="",this.examType="Midterm",this.examDate="",this.academicYear="",this.schoolId=0,this.saving=!1}ngOnInit(){return d(this,null,function*(){this.classes=Array.from({length:12},(t,s)=>s+1);let r=yield N.get({key:"user_profile"});this.schoolId=JSON.parse(r.value).schoolId;let o=new Date().getFullYear();this.academicYear=`${o}-${(o+1).toString().slice(2)}`})}toggleClass(r,o){o?this.selectedClasses.push(r):this.selectedClasses=this.selectedClasses.filter(t=>t!==r)}createExam(){if(!this.examName||!this.examDate||this.selectedClasses.length===0){this.showToast("Fill all required fields","danger");return}this.saving=!0;let r={schoolId:this.schoolId,examName:this.examName,examType:this.examType,examDate:this.examDate,academicYear:this.academicYear,classIds:this.selectedClasses};this.http.post(`${ne.apiBaseUrl}/Exam/CreateExam`,r).subscribe({next:()=>d(this,null,function*(){this.saving=!1,yield this.showToast("Exam created successfully","success"),this.router.navigateByUrl("admin/exam-list")}),error:()=>d(this,null,function*(){this.saving=!1,yield this.showToast("Failed to create exam","danger")})})}showToast(r,o){return d(this,null,function*(){yield(yield this.toast.create({message:r,duration:2e3,color:o,position:"top"})).present()})}};l.\u0275fac=function(o){return new(o||l)(h(O),h(te),h(v))},l.\u0275cmp=M({type:l,selectors:[["app-create-exam"]],decls:50,vars:5,consts:[[1,"exam-header"],[1,"exam-page"],[1,"section-card"],[1,"section-title"],["name","clipboard-outline"],["position","stacked"],["color","danger"],["placeholder","e.g. Mid Term Examination",3,"ngModelChange","ngModel"],["interface","action-sheet","placeholder","Select exam type",3,"ngModelChange","ngModel"],["value","Unit Test"],["value","Mid Term"],["value","Final"],["readonly","",3,"ngModelChange","ngModel"],["type","date",3,"ngModelChange","ngModel"],["name","school-outline"],["size","6",4,"ngFor","ngForOf"],["expand","block","color","success",3,"click"],["size","6"],["lines","none",1,"checkbox-item"],["slot","start",3,"ionChange"]],template:function(o,t){o&1&&(e(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),n(3,"Create Exam"),i()()(),e(4,"ion-content",1)(5,"div",2)(6,"h3",3),u(7,"ion-icon",4),n(8," Exam Details "),i(),e(9,"ion-item")(10,"ion-label",5),n(11," Exam Name "),e(12,"ion-text",6),n(13,"*"),i()(),e(14,"ion-input",7),x("ngModelChange",function(a){return g(t.examName,a)||(t.examName=a),a}),i()(),e(15,"ion-item")(16,"ion-label",5),n(17," Exam Type "),e(18,"ion-text",6),n(19,"*"),i()(),e(20,"ion-select",8),x("ngModelChange",function(a){return g(t.examType,a)||(t.examType=a),a}),e(21,"ion-select-option",9),n(22,"Unit Test"),i(),e(23,"ion-select-option",10),n(24,"Mid Term"),i(),e(25,"ion-select-option",11),n(26,"Final"),i()()(),e(27,"ion-item")(28,"ion-label",5),n(29," Academic Year "),e(30,"ion-text",6),n(31,"*"),i()(),e(32,"ion-input",12),x("ngModelChange",function(a){return g(t.academicYear,a)||(t.academicYear=a),a}),i()(),e(33,"ion-item")(34,"ion-label",5),n(35," Exam Date "),e(36,"ion-text",6),n(37,"*"),i()(),e(38,"ion-input",13),x("ngModelChange",function(a){return g(t.examDate,a)||(t.examDate=a),a}),i()()(),e(39,"div",2)(40,"h3",3),u(41,"ion-icon",14),n(42," Select Classes "),i(),e(43,"ion-grid")(44,"ion-row"),b(45,oe,5,1,"ion-col",15),i()()()(),e(46,"ion-footer")(47,"ion-toolbar")(48,"ion-button",16),_("click",function(){return t.createExam()}),n(49," Create Exam "),i()()()),o&2&&(c(14),p("ngModel",t.examName),c(6),p("ngModel",t.examType),c(12),p("ngModel",t.academicYear),c(6),p("ngModel",t.examDate),c(7),E("ngForOf",t.classes))},dependencies:[T,P,F,k,D,ie,V,z,A,L,U,j,H,R,q,G,J,K,Q,X,Z,$,ee,W,Y,B],styles:[".exam-page[_ngcontent-%COMP%]{--background: #f4f6fb;padding:16px 16px 90px}.exam-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: linear-gradient( 135deg, var(--ion-color-primary), #4f8cff );--color: #ffffff;box-shadow:0 6px 20px #00000040}.section-card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;padding:16px;margin-bottom:18px;box-shadow:0 10px 25px #0000000f}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:0 0 14px;font-size:15px;font-weight:600;color:#1f2937}.section-title[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:var(--ion-color-primary)}ion-item[_ngcontent-%COMP%]{--background: transparent;border:1px solid #e5e7eb;border-radius:12px;margin-bottom:12px;opacity:1!important}ion-item.item-has-focus[_ngcontent-%COMP%]{border-color:var(--ion-color-primary)}ion-item.item-interactive[_ngcontent-%COMP%], ion-item.item-has-value[_ngcontent-%COMP%]{opacity:1!important}ion-select[_ngcontent-%COMP%]{--color: #111827;--placeholder-opacity: 1}ion-select[_ngcontent-%COMP%]::part(text){color:#111827!important;opacity:1!important;font-weight:500}ion-select[_ngcontent-%COMP%]::part(icon){color:#374151!important}.checkbox-item[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:6px 8px;margin-bottom:10px}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #ffffff;box-shadow:0 -6px 20px #00000014;padding:10px 14px}ion-button[_ngcontent-%COMP%]{height:52px;font-size:15px;font-weight:600;border-radius:14px}"]});let m=l;return m})();export{fe as CreateExamPage};
