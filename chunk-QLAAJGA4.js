import{a as I}from"./chunk-HGUJNCJE.js";import{B as b,C,Da as j,Ea as A,F as a,G as y,Ga as O,H as M,J as p,K as g,L as u,N as v,Na as k,Oa as F,Pa as N,R as x,S as P,Ta as B,U as E,X as w,_ as W,ab as L,db as D,eb as z,fb as H,gb as V,hb as Y,kb as U,lb as q,mb as G,nb as J,pb as K,qb as Q,r as n,s as S,t as T,u as _,w as l,x as e,xb as R,y as t,z as f}from"./chunk-ASIUTVEG.js";import"./chunk-MYMNFIR5.js";import"./chunk-QUJFQN2Y.js";import"./chunk-SQ2FC6MI.js";import"./chunk-MXQU5NIL.js";import"./chunk-RE5BQNDC.js";import"./chunk-WMOWL56E.js";import"./chunk-DE3NY5IG.js";import"./chunk-GVUKRWTT.js";import"./chunk-7FY2OE2O.js";import"./chunk-V5RQBZ6Q.js";import"./chunk-TOLZJHI4.js";import"./chunk-3IV7M6SB.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-O6KNH33T.js";import"./chunk-CKP3SGE2.js";import"./chunk-IMAI2IPK.js";import"./chunk-PAKTAAC6.js";import"./chunk-BBW5KUYG.js";import"./chunk-677QIFDF.js";import"./chunk-G7CBOZIR.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-3IVKBF6N.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";var X=()=>[1,2,3,4,5,6,7,8,9,10,11,12];function Z(s,r){if(s&1&&(e(0,"ion-select-option",8),a(1),t()),s&2){let d=r.$implicit;l("value",d),n(),M(" Class ",d," ")}}function $(s,r){if(s&1&&(e(0,"ion-select-option",8),a(1),t()),s&2){let d=r.$implicit;l("value",d.subjectId),n(),M(" ",d.subjectName," ")}}function ee(s,r){s&1&&(e(0,"p",22),a(1," No subjects found for selected class & section "),t())}function te(s,r){s&1&&f(0,"ion-spinner",23)}function ie(s,r){if(s&1&&(e(0,"ion-text",24)(1,"p",25),a(2),t()()),s&2){let d=C();n(2),y(d.successMessage)}}function ne(s,r){if(s&1&&(e(0,"ion-text",26)(1,"p",27),a(2),t()()),s&2){let d=C();n(2),y(d.errorMessage)}}var ue=(()=>{let r=class r{constructor(h){this.http=h,this.subjectApi=`${I.apiBaseUrl}/School/GetSubjectsForClassSection`,this.timetableApi=`${I.apiBaseUrl}/School/CreateClassTimetable`,this.schoolId=17,this.academicYear="2025-26",this.effectiveFrom="2025-06-01",this.startTime="",this.endTime="",this.subjects=[],this.loading=!1,this.successMessage="",this.errorMessage=""}loadSubjects(){if(this.subjectId=void 0,this.subjects=[],this.errorMessage="",!this.classId||!this.sectionId)return;let h=`${this.subjectApi}?schoolId=${this.schoolId}&classId=${this.classId}&sectionId=${this.sectionId}`;this.http.get(h).subscribe({next:m=>{this.subjects=m?.data??[]},error:()=>{this.errorMessage="Failed to load subjects"}})}saveTimetable(){if(this.successMessage="",this.errorMessage="",!this.classId||!this.sectionId||!this.subjectId||!this.dayOfWeek||!this.periodNo||!this.startTime||!this.endTime){this.errorMessage="All fields are required";return}let h={schoolId:this.schoolId,classId:this.classId,sectionId:this.sectionId,subjectId:this.subjectId,dayOfWeek:this.dayOfWeek,periodNo:this.periodNo,startTime:this.startTime,endTime:this.endTime,effectiveFrom:this.effectiveFrom,academicYear:this.academicYear};this.loading=!0,this.http.post(this.timetableApi,h).subscribe({next:()=>{this.successMessage="Timetable added successfully",this.loading=!1},error:m=>{this.errorMessage=m?.error?.message||"Failed to save timetable",this.loading=!1}})}};r.\u0275fac=function(m){return new(m||r)(S(w))},r.\u0275cmp=T({type:r,selectors:[["app-add-class-timetable"]],decls:73,vars:24,consts:[[1,"timetable-header"],[1,"timetable-page"],[1,"section-card"],[1,"section-title"],["name","school-outline"],["position","stacked"],[3,"ngModelChange","ionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["name","book-outline"],["placeholder","Select subject",3,"ngModelChange","ngModel"],["class","hint",4,"ngIf"],["name","time-outline"],[3,"ngModelChange","ngModel"],["type","number","placeholder","e.g. 1",3,"ngModelChange","ngModel"],[1,"time-row"],["type","time",3,"ngModelChange","ngModel"],[1,"action-card"],["expand","block","color","success",1,"primary-btn",3,"click","disabled"],["slot","start",4,"ngIf"],["color","success",4,"ngIf"],["color","danger",4,"ngIf"],[1,"hint"],["slot","start"],["color","success"],[1,"msg","success"],["color","danger"],[1,"msg","error"]],template:function(m,i){m&1&&(e(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),a(3,"Add Class Timetable"),t()()(),e(4,"ion-content",1)(5,"div",2)(6,"h3",3),f(7,"ion-icon",4),a(8," Class & Section "),t(),e(9,"ion-item")(10,"ion-label",5),a(11,"Class *"),t(),e(12,"ion-select",6),u("ngModelChange",function(o){return g(i.classId,o)||(i.classId=o),o}),b("ionChange",function(){return i.loadSubjects()}),_(13,Z,2,2,"ion-select-option",7),t()(),e(14,"ion-item")(15,"ion-label",5),a(16,"Section *"),t(),e(17,"ion-select",6),u("ngModelChange",function(o){return g(i.sectionId,o)||(i.sectionId=o),o}),b("ionChange",function(){return i.loadSubjects()}),e(18,"ion-select-option",8),a(19,"A"),t(),e(20,"ion-select-option",8),a(21,"B"),t(),e(22,"ion-select-option",8),a(23,"C"),t()()()(),e(24,"div",2)(25,"h3",3),f(26,"ion-icon",9),a(27," Subject "),t(),e(28,"ion-item")(29,"ion-label",5),a(30,"Subject *"),t(),e(31,"ion-select",10),u("ngModelChange",function(o){return g(i.subjectId,o)||(i.subjectId=o),o}),_(32,$,2,2,"ion-select-option",7),t()(),_(33,ee,2,0,"p",11),t(),e(34,"div",2)(35,"h3",3),f(36,"ion-icon",12),a(37," Schedule Details "),t(),e(38,"ion-item")(39,"ion-label",5),a(40,"Day *"),t(),e(41,"ion-select",13),u("ngModelChange",function(o){return g(i.dayOfWeek,o)||(i.dayOfWeek=o),o}),e(42,"ion-select-option",8),a(43,"Monday"),t(),e(44,"ion-select-option",8),a(45,"Tuesday"),t(),e(46,"ion-select-option",8),a(47,"Wednesday"),t(),e(48,"ion-select-option",8),a(49,"Thursday"),t(),e(50,"ion-select-option",8),a(51,"Friday"),t(),e(52,"ion-select-option",8),a(53,"Saturday"),t()()(),e(54,"ion-item")(55,"ion-label",5),a(56,"Period No *"),t(),e(57,"ion-input",14),u("ngModelChange",function(o){return g(i.periodNo,o)||(i.periodNo=o),o}),t()(),e(58,"div",15)(59,"ion-item")(60,"ion-label",5),a(61,"Start Time *"),t(),e(62,"ion-input",16),u("ngModelChange",function(o){return g(i.startTime,o)||(i.startTime=o),o}),t()(),e(63,"ion-item")(64,"ion-label",5),a(65,"End Time *"),t(),e(66,"ion-input",16),u("ngModelChange",function(o){return g(i.endTime,o)||(i.endTime=o),o}),t()()()(),e(67,"div",17)(68,"ion-button",18),b("click",function(){return i.saveTimetable()}),_(69,te,1,0,"ion-spinner",19),a(70," Save Timetable "),t(),_(71,ie,3,1,"ion-text",20)(72,ne,3,1,"ion-text",21),t()()),m&2&&(n(12),p("ngModel",i.classId),n(),l("ngForOf",v(23,X)),n(4),p("ngModel",i.sectionId),n(),l("value",1),n(2),l("value",2),n(2),l("value",3),n(9),p("ngModel",i.subjectId),n(),l("ngForOf",i.subjects),n(),l("ngIf",i.classId&&i.sectionId&&i.subjects.length===0),n(8),p("ngModel",i.dayOfWeek),n(),l("value",1),n(2),l("value",2),n(2),l("value",3),n(2),l("value",4),n(2),l("value",5),n(2),l("value",6),n(5),p("ngModel",i.periodNo),n(5),p("ngModel",i.startTime),n(4),p("ngModel",i.endTime),n(2),l("disabled",i.loading),n(),l("ngIf",i.loading),n(2),l("ngIf",i.successMessage),n(),l("ngIf",i.errorMessage))},dependencies:[E,x,P,O,j,A,R,B,L,D,z,H,V,Y,U,q,G,J,K,Q,k,F,N,W],styles:[".timetable-page[_ngcontent-%COMP%]{--background: #f4f6fb;padding:16px}.timetable-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #0ea5a4, #2563eb);--color: #ffffff}.section-card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;padding:16px;margin-bottom:18px;box-shadow:0 10px 25px #0000000f}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:15px;font-weight:600;margin-bottom:14px;color:#1f2937}.section-title[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#0ea5a4}ion-item[_ngcontent-%COMP%]{--background: transparent;border:1px solid #e5e7eb;border-radius:12px;margin-bottom:12px}.time-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}.hint[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;margin-top:6px}.action-card[_ngcontent-%COMP%]{margin-top:10px}.primary-btn[_ngcontent-%COMP%]{height:48px;font-weight:600}.msg[_ngcontent-%COMP%]{text-align:center;margin-top:10px;font-size:14px;font-weight:500}.msg.success[_ngcontent-%COMP%]{color:#166534}.msg.error[_ngcontent-%COMP%]{color:#991b1b}"]});let s=r;return s})();export{ue as AddClassTimetablePage};
