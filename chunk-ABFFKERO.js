import{a as Q}from"./chunk-HGUJNCJE.js";import{a as L}from"./chunk-FNKDIBDA.js";import{$a as w,B as g,Ca as z,Da as B,Ea as q,F as i,Fa as F,G as M,J as h,K as _,L as b,Oa as H,S as W,Sa as y,Ta as V,U as P,X as j,ab as T,cb as I,db as S,eb as A,fb as J,gb as U,lb as G,mb as K,ob as v,pb as E,r as c,s as p,t as C,u as x,ub as O,vb as k,w as u,wb as N,x as t,y as n,z as m}from"./chunk-JP5JOBMG.js";import"./chunk-MYMNFIR5.js";import"./chunk-QUJFQN2Y.js";import"./chunk-SQ2FC6MI.js";import"./chunk-MXQU5NIL.js";import"./chunk-RE5BQNDC.js";import"./chunk-WMOWL56E.js";import"./chunk-VZPOKD32.js";import"./chunk-DE3NY5IG.js";import"./chunk-GVUKRWTT.js";import"./chunk-7FY2OE2O.js";import"./chunk-V5RQBZ6Q.js";import"./chunk-TOLZJHI4.js";import"./chunk-3IV7M6SB.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-O6KNH33T.js";import"./chunk-CKP3SGE2.js";import"./chunk-IMAI2IPK.js";import"./chunk-PAKTAAC6.js";import"./chunk-BBW5KUYG.js";import"./chunk-677QIFDF.js";import"./chunk-G7CBOZIR.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-3IVKBF6N.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as D,b as R,e as f}from"./chunk-JHI3MBHO.js";var X=(()=>{let r=class r{constructor(l,o){this.modalCtrl=l,this.toastCtrl=o}close(){this.modalCtrl.dismiss()}copy(l){return f(this,null,function*(){yield navigator.clipboard.writeText(l),(yield this.toastCtrl.create({message:"Copied to clipboard",duration:1200,position:"top",color:"success"})).present()})}};r.\u0275fac=function(o){return new(o||r)(p(O),p(k))},r.\u0275cmp=C({type:r,selectors:[["app-teacher-credentials-modal"]],inputs:{fullName:"fullName",username:"username",password:"password"},decls:41,vars:3,consts:[[1,"success-header"],["slot","end"],["fill","clear",3,"click"],[1,"success-page"],[1,"content-wrapper"],[1,"success-hero"],[1,"checkmark"],[1,"credentials"],[1,"credential-card"],[1,"label"],["fill","clear","size","small",3,"click"],["name","copy-outline"],[1,"credential-card","highlight"],[1,"warning-box"],[1,"success-footer"],["expand","block",3,"click"]],template:function(o,e){o&1&&(t(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),i(3," \u{1F389} Teacher Registered "),n(),t(4,"ion-buttons",1)(5,"ion-button",2),g("click",function(){return e.close()}),i(6,"Close"),n()()()(),t(7,"ion-content",3)(8,"div",4)(9,"div",5),m(10,"div",6),t(11,"h2"),i(12,"Credentials Generated"),n(),t(13,"p"),i(14),n()(),t(15,"div",7)(16,"div",8)(17,"p",9),i(18,"Username"),n(),t(19,"h3"),i(20),n(),t(21,"ion-button",10),g("click",function(){return e.copy(e.username)}),m(22,"ion-icon",11),n()(),t(23,"div",12)(24,"p",9),i(25,"Temporary Password"),n(),t(26,"h3"),i(27),n(),t(28,"ion-button",10),g("click",function(){return e.copy(e.password)}),m(29,"ion-icon",11),n()()(),t(30,"div",13)(31,"strong"),i(32,"Security Notice"),n(),t(33,"p"),i(34," Please save these credentials now. The password will "),t(35,"b"),i(36,"not be shown again"),n(),i(37,". "),n()()()(),t(38,"ion-footer",14)(39,"ion-button",15),g("click",function(){return e.close()}),i(40," OK, I HAVE SAVED THEM "),n()()),o&2&&(c(14),M(e.fullName),c(6),M(e.username),c(7),M(e.password))},dependencies:[N,y,V,w,T,I,S,v,E,P],styles:[".success-page[_ngcontent-%COMP%]{--background: #f4f6fb}.success-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #dcfce7;--color: #14532d;font-weight:700}.content-wrapper[_ngcontent-%COMP%]{padding:12px 16px 8px;display:flex;flex-direction:column;gap:12px}.success-hero[_ngcontent-%COMP%]{text-align:center;margin-top:6px}.checkmark[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,#22c55e,#16a34a);margin:0 auto 8px}.success-hero[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:19px;font-weight:700;color:#14532d}.success-hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:4px;font-size:14px;color:#166534}.credentials[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.credential-card[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:16px;padding:14px;text-align:center;box-shadow:0 6px 16px #0000000f}.credential-card.highlight[_ngcontent-%COMP%]{background:#f0fdf4;border:1px solid #bbf7d0}.credential-card[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px}.label[_ngcontent-%COMP%]{font-size:12.5px;color:#6b7280}.credential-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:4px;font-size:15.5px;font-weight:600;color:#111827;word-break:break-all}.warning-box[_ngcontent-%COMP%]{background:#fff7ed;border-left:4px solid #f59e0b;padding:10px 12px;border-radius:12px;color:#92400e;font-size:13px}.success-footer[_ngcontent-%COMP%]{padding:8px 14px;background:#fff;box-shadow:0 -6px 20px #00000014}.success-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:48px;font-size:14.5px;font-weight:700;border-radius:14px}"]});let s=r;return s})();function $(s,r){s&1&&(t(0,"ion-text",16),i(1," Teacher name is required "),n())}function ee(s,r){s&1&&(t(0,"ion-text",16),i(1," Phone must start with 6\u20139 and be 10 digits "),n())}function te(s,r){s&1&&(t(0,"ion-text",16),i(1," Joining date is required "),n())}function ne(s,r){s&1&&m(0,"ion-spinner",17)}var he=(()=>{let r=class r{constructor(l,o,e){this.http=l,this.toastCtrl=o,this.modalCtrl=e,this.saving=!1,this.submitted=!1,this.mobileRegex=/^[6-9]\d{9}$/,this.form={schoolId:0,fullName:"",phone:"",email:"",joiningDate:"",qualification:""}}ngOnInit(){return f(this,null,function*(){let l=yield L.get({key:"user_profile"});if(l.value){let o=JSON.parse(l.value);this.form.schoolId=o.schoolId}})}submit(){if(this.submitted=!0,!this.form.schoolId||!this.form.fullName||!this.form.phone||!this.form.joiningDate){this.showToast("Please fill all required fields","danger");return}if(!this.mobileRegex.test(this.form.phone)){this.showToast("Invalid phone number","danger");return}this.saving=!0;let l={schoolId:this.form.schoolId,fullName:this.form.fullName.trim(),phone:this.form.phone.trim(),email:this.form.email||null,joiningDate:this.form.joiningDate,qualification:this.form.qualification||null};this.http.post(`${Q.apiBaseUrl}/Teacher/RegisterTeacher`,l).subscribe({next:o=>f(this,null,function*(){this.saving=!1,o?.success&&o?.data&&(yield(yield this.modalCtrl.create({component:X,componentProps:{fullName:o.data.fullName,username:o.data.username,password:o.data.tempPassword},backdropDismiss:!1})).present(),this.resetForm())}),error:()=>{this.saving=!1}})}resetForm(){this.form=R(D({},this.form),{fullName:"",phone:"",email:"",joiningDate:"",qualification:""}),this.submitted=!1}showToast(l,o){return f(this,null,function*(){yield(yield this.toastCtrl.create({message:l,duration:3500,position:"top",color:o})).present()})}};r.\u0275fac=function(o){return new(o||r)(p(j),p(k),p(O))},r.\u0275cmp=C({type:r,selectors:[["app-register-teacher"]],decls:42,vars:10,consts:[["color","primary"],["size","large"],[1,"form-card"],[1,"section-card"],[1,"section-title"],["name","person-outline"],["position","stacked"],["type","text","placeholder","Enter full name",3,"ngModelChange","ngModel"],["color","danger",4,"ngIf"],["type","tel","maxlength","10","inputmode","numeric","placeholder","Enter mobile number",3,"ngModelChange","ngModel"],["type","email","placeholder","Enter email address",3,"ngModelChange","ngModel"],["name","school-outline"],["type","date",3,"ngModelChange","ngModel"],["type","text","placeholder","Eg. B.Ed, M.Sc, B.Tech",3,"ngModelChange","ngModel"],["expand","block","color","success",3,"click","disabled"],["slot","start",4,"ngIf"],["color","danger"],["slot","start"]],template:function(o,e){o&1&&(t(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1),i(3,"Register Teacher"),n()()(),t(4,"ion-content")(5,"div",2)(6,"div",3)(7,"h3",4),m(8,"ion-icon",5),i(9," Basic Details "),n(),t(10,"ion-item")(11,"ion-label",6),i(12,"Full Name *"),n(),t(13,"ion-input",7),b("ngModelChange",function(a){return _(e.form.fullName,a)||(e.form.fullName=a),a}),n()(),x(14,$,2,0,"ion-text",8),t(15,"ion-item")(16,"ion-label",6),i(17,"Mobile Number *"),n(),t(18,"ion-input",9),b("ngModelChange",function(a){return _(e.form.phone,a)||(e.form.phone=a),a}),n()(),x(19,ee,2,0,"ion-text",8),t(20,"ion-item")(21,"ion-label",6),i(22,"Email"),n(),t(23,"ion-input",10),b("ngModelChange",function(a){return _(e.form.email,a)||(e.form.email=a),a}),n()()(),t(24,"div",3)(25,"h3",4),m(26,"ion-icon",11),i(27," Professional Details "),n(),t(28,"ion-item")(29,"ion-label",6),i(30,"Joining Date *"),n(),t(31,"ion-input",12),b("ngModelChange",function(a){return _(e.form.joiningDate,a)||(e.form.joiningDate=a),a}),n()(),x(32,te,2,0,"ion-text",8),t(33,"ion-item")(34,"ion-label",6),i(35,"Qualification"),n(),t(36,"ion-input",13),b("ngModelChange",function(a){return _(e.form.qualification,a)||(e.form.qualification=a),a}),n()()()()(),t(37,"ion-footer")(38,"ion-toolbar")(39,"ion-button",14),g("click",function(){return e.submit()}),x(40,ne,1,0,"ion-spinner",15),i(41," Register Teacher "),n()()()),o&2&&(c(13),h("ngModel",e.form.fullName),c(),u("ngIf",e.submitted&&!e.form.fullName),c(4),h("ngModel",e.form.phone),c(),u("ngIf",e.submitted&&!e.mobileRegex.test(e.form.phone)),c(4),h("ngModel",e.form.email),c(8),h("ngModel",e.form.joiningDate),c(),u("ngIf",e.submitted&&!e.form.joiningDate),c(4),h("ngModel",e.form.qualification),c(3),u("disabled",e.saving),c(),u("ngIf",e.saving))},dependencies:[P,W,F,z,q,B,N,y,w,T,I,S,A,J,U,G,K,v,E,H],styles:["ion-content[_ngcontent-%COMP%]{--background: #f4f6fb}.form-card[_ngcontent-%COMP%]{padding:16px 16px 100px}.section-card[_ngcontent-%COMP%]{background:#fff;border-radius:18px;padding:16px;margin-bottom:18px;box-shadow:0 10px 25px #0000000f}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:0 0 14px;font-size:15px;font-weight:600;color:#2c2c2c}.section-title[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:var(--ion-color-primary)}ion-item[_ngcontent-%COMP%]{--background: transparent;--highlight-height: 0;--min-height: 52px;border:1px solid #e4e7ec;border-radius:12px;margin-bottom:12px}ion-item.item-has-focus[_ngcontent-%COMP%], ion-item.item-has-value[_ngcontent-%COMP%]{border-color:var(--ion-color-primary);background:#f9fafb}ion-input[_ngcontent-%COMP%]{font-size:14px}ion-text[color=danger][_ngcontent-%COMP%]{font-size:12px;margin-left:6px;margin-top:4px;display:block}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #ffffff;box-shadow:0 -6px 20px #00000014;padding:10px 14px}ion-button[_ngcontent-%COMP%]{height:52px;font-size:15px;font-weight:600;border-radius:14px}"]});let s=r;return s})();export{he as RegisterTeacherPage};
