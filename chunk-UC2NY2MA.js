import{b as F}from"./chunk-GHWYKTEW.js";import"./chunk-HGUJNCJE.js";import{a as k}from"./chunk-FNKDIBDA.js";import{A as p,Bb as j,C as c,D as e,E as n,F as d,J as C,K as y,Lb as N,Ra as O,S as s,Sa as S,U as b,Ua as I,W as f,X as u,Y as h,db as E,fa as P,gb as U,ha as v,ib as z,jb as L,pb as T,qa as w,tb as B,u as a,ub as A,vb as W,w as m,y as M}from"./chunk-A35WYOVZ.js";import"./chunk-MYMNFIR5.js";import"./chunk-QUJFQN2Y.js";import"./chunk-SQ2FC6MI.js";import"./chunk-MXQU5NIL.js";import"./chunk-RE5BQNDC.js";import"./chunk-WMOWL56E.js";import"./chunk-VZPOKD32.js";import"./chunk-DE3NY5IG.js";import"./chunk-GVUKRWTT.js";import"./chunk-7FY2OE2O.js";import"./chunk-V5RQBZ6Q.js";import"./chunk-TOLZJHI4.js";import"./chunk-3IV7M6SB.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-O6KNH33T.js";import"./chunk-CKP3SGE2.js";import"./chunk-IMAI2IPK.js";import"./chunk-IGVXFY24.js";import"./chunk-5TIAO6TV.js";import"./chunk-BANGDX2W.js";import"./chunk-FZQDFHAZ.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as _}from"./chunk-JHI3MBHO.js";function D(i,r){if(i&1&&(e(0,"div",16),s(1),n()),i&2){let Y=y();a(),b(" ",Y.errorMessage," ")}}function V(i,r){i&1&&d(0,"ion-spinner",17)}function q(i,r){i&1&&(e(0,"div",18)(1,"div",19)(2,"div",20),d(3,"ion-icon",4),n(),e(4,"p"),s(5,"Signing you in\u2026"),n()()())}var ne=(()=>{let r=class r{constructor(g,o){this.authService=g,this.router=o,this.username="",this.password="",this.loading=!1,this.errorMessage=""}login(){if(!this.username||!this.password){this.errorMessage="Username and password required";return}this.loading=!0,this.errorMessage="",this.authService.login(this.username,this.password).subscribe({next:g=>_(this,null,function*(){if(g==="SuperAdmin"){yield k.set({key:"user_profile",value:JSON.stringify({role:"SuperAdmin",name:"System Administrator"})}),this.loading=!1,this.router.navigateByUrl("/super-admin/dashboard",{replaceUrl:!0});return}this.authService.getMyProfile(this.username).subscribe({next:o=>{this.loading=!1,o.role==="Student"?this.router.navigateByUrl("/student/dashboard",{replaceUrl:!0}):o.role==="Teacher"?this.router.navigateByUrl("/teacher/dashboard",{replaceUrl:!0}):o.role==="SchoolAdmin"&&this.router.navigateByUrl("/admin/dashboard",{replaceUrl:!0})},error:()=>{this.loading=!1,this.errorMessage="Unable to load profile"}})}),error:()=>{this.loading=!1,this.errorMessage="Invalid username or password"}})}};r.\u0275fac=function(o){return new(o||r)(m(F),m(w))},r.\u0275cmp=M({type:r,selectors:[["app-login"]],decls:25,vars:6,consts:[["fullscreen","",1,"login-page"],[1,"login-container"],[1,"logo-section"],[1,"logo-icon","floating"],["name","school-outline"],[1,"login-card"],["lines","none",1,"input-item"],["name","person-outline","slot","start"],["placeholder","Username",3,"ngModelChange","ngModel"],["name","lock-closed-outline","slot","start"],["type","password","placeholder","Password",3,"ngModelChange","ngModel"],["class","error-text",4,"ngIf"],["expand","block",1,"login-btn",3,"click","disabled"],["slot","start",4,"ngIf"],[1,"extra-links"],["class","loading-overlay",4,"ngIf"],[1,"error-text"],["slot","start"],[1,"loading-overlay"],[1,"loading-box"],[1,"loader-logo"]],template:function(o,t){o&1&&(e(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3),d(4,"ion-icon",4),n(),e(5,"h1"),s(6,"VidyaOS"),n(),e(7,"p"),s(8,"Manage students, staff & academics"),n()(),e(9,"ion-card",5)(10,"ion-card-content")(11,"ion-item",6),d(12,"ion-icon",7),e(13,"ion-input",8),h("ngModelChange",function(l){return u(t.username,l)||(t.username=l),l}),n()(),e(14,"ion-item",6),d(15,"ion-icon",9),e(16,"ion-input",10),h("ngModelChange",function(l){return u(t.password,l)||(t.password=l),l}),n()(),p(17,D,2,1,"div",11),e(18,"ion-button",12),C("click",function(){return t.login()}),p(19,V,1,0,"ion-spinner",13),s(20," Login "),n(),e(21,"div",14)(22,"a"),s(23,"Forgot Password?"),n()()()()(),p(24,q,6,0,"div",15),n()),o&2&&(a(13),f("ngModel",t.username),a(3),f("ngModel",t.password),a(),c("ngIf",t.errorMessage),a(),c("disabled",t.loading),a(),c("ngIf",t.loading),a(5),c("ngIf",t.loading))},dependencies:[v,P,N,U,z,L,T,B,A,W,j,E,I,O,S],styles:[".login-page[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #020617, #111827)}.login-container[_ngcontent-%COMP%]{min-height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:24px}.logo-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:28px;color:#fff}.logo-icon[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:18px;background:linear-gradient(135deg,var(--ion-color-primary),#4f8cff);display:flex;align-items:center;justify-content:center;margin:0 auto 12px;box-shadow:0 14px 35px #00000073}.logo-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:32px;color:#fff}.floating[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_float 3.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%{transform:translateY(0)}50%{transform:translateY(-6px)}to{transform:translateY(0)}}.logo-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:26px;font-weight:700}.logo-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:6px;font-size:13px;opacity:.85}.login-card[_ngcontent-%COMP%]{width:100%;max-width:380px;border-radius:20px;box-shadow:0 22px 50px #00000080}.input-item[_ngcontent-%COMP%]{margin-bottom:16px;border-radius:14px;background:#f9fafb;--padding-start: 12px}.input-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#6b7280}.input-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:14px}.login-btn[_ngcontent-%COMP%]{margin-top:12px;height:48px;font-size:15px;font-weight:600;border-radius:14px}.error-text[_ngcontent-%COMP%]{color:#ef4444;font-size:13px;margin-bottom:10px;text-align:center}.extra-links[_ngcontent-%COMP%]{margin-top:16px;text-align:center}.extra-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:13px;color:var(--ion-color-primary);text-decoration:none;font-weight:500}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#020617bf;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);display:flex;align-items:center;justify-content:center;z-index:9999}.loading-box[_ngcontent-%COMP%]{text-align:center;color:#fff}.loader-logo[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:18px}"]});let i=r;return i})();export{ne as LoginPage};
